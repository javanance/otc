<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.org/schema/seam/taglib"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui">

  
  <h:form id="formHifiveUnderlyingEdit" >
    <p:growl id ="growl" showDetail="false" sticky="false"  life="5000" />
    <p:contextMenu id="underlyingCtxMenu" for="tableHifiveUnderlying" widgetVar = "underlyingCmenu">
      <p:menuitem value ="#{messages.insertInfoSelection}" action="#{tableHifiveInit.addUnderlying}"  
                  update="tableHifiveUnderlying"/>
      <p:menuitem value ="#{messages.deleteInfoSelection}" action="#{tableHifiveInit.removeUnderlying(tableHifiveInit.selectUnder)}"  
                  update="growl, tableHifiveUnderlying"/>                  
    </p:contextMenu>
<!-- <h:panelGroup layout="block" id="tableHifiveUnderlyingWrap"> -->    
    <p:dataTable id="tableHifiveUnderlying" var="_underlying" value="#{underlyingList}" 
      widgetVar="wgTableHiFiveUnderlying1"
      emptyMessage="#{messages.noDataFound}" 
      editable="#{isEditable}" editMode="cell"
      selection="#{tableHifiveInit.selectUnder}"
      selectionMode="single"
      rowKey="#{_underlying.id}"
      resizableColumns="true" liveResize="false"
      styleClass="dynamicTableId"      >
       
      <p:ajax event="rowSelect" update="@form:underlyingCtxMenu"/>
      <!-- <p:column id="colProdId" sortBy="#{_underlying.prodId}" width="100">
        <f:facet name="header">  
           <h:outputText value="#{messages.getProdId}" />  
         </f:facet>
        <h:outputText value="#{_underlying.prodId}" />
      </p:column> -->
      <p:column id="colProdId" sortBy="#{_underlying.id.prodId}" width="100">
        <f:facet name="header">  
           <h:outputText value="#{messages.getProdId}" />  
         </f:facet>
        <h:outputText value="#{_underlying.id.prodId}" />
      </p:column>
<!--       <p:column headerText="Type" width="100">
        <p:cellEditor>
          <f:facet name="output"> <h:outputText  value="#{_underlying.underlyingType}"></h:outputText></f:facet>
          <f:facet name="input">
            <p:selectOneMenu value="#{_underlying.underlyingType}" style="width:100%">
              <f:selectItem itemLabel="Select Type"/>
              <f:selectItem itemLabel="Stock" itemValue="stock"/>
              <f:selectItem itemLabel="StockIndex" itemValue="stockIndex"/>
            </p:selectOneMenu>
          </f:facet>
        </p:cellEditor>
      </p:column> -->
      
 <!--      <p:column width="100" >
        <f:facet name="header"><h:outputText value="#{messages.underType}" /> </f:facet>
        <p:cellEditor>
          <f:facet name="output"> <h:outputText  value="#{_underlying.underType}"></h:outputText></f:facet>
          <f:facet name="input">
            <p:selectOneMenu value="#{_underlying.underType}" style="width:100%">
               <s:selectItems value="#{mvTypeOptionAction.underlyingType}" var="_uType" label="#{_uType}" />
               <s:convertEnum/>
               <p:ajax listener="#{tableHifiveInit.loadUnderlying(_underlying.underType)}" update="selUnderId" />
            </p:selectOneMenu>
          </f:facet>
        </p:cellEditor>
      </p:column> -->
      
<!--        <p:column id="colUnderlyingId" sortBy="#{_underlying.underlyingId}" width="100" >
        <f:facet name="header">  
           <h:outputText value="#{messages.getUnderlyingId}" />  
         </f:facet>
        <p:cellEditor >
          <f:facet name="output"><h:outputText value="#{_underlying.underlyingId}" /></f:facet>
          <f:facet name="input">
            <p:autoComplete value="#{_underlying.underlyingId}" forceSelection="true"
                            completeMethod="#{tableHifiveInit.completeUnderlying}" 
                            emptyMessage="No Match Data" 
                             style="width:100%">
               <p:ajax event="itemSelect" listener="#{tableHifiveInit.resetUnderlying}"  update="tableHifiveUnderlying"/>
            </p:autoComplete> 
          </f:facet>
        </p:cellEditor>
      </p:column> -->
      
      <!-- <p:column id="colUnderlyingId1" sortBy="#{_underlying.underlying}" width="100" >
        <f:facet name="header">  
           <h:outputText value="#{messages.getUnderlyingId}" />  
         </f:facet>
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{_underlying.underlying.stockId}" /></f:facet>
          <f:facet name="input">
            <p:autoComplete value="#{_underlying.underlying}" var="_under" itemLabel="#{_under.stockId}" 
                            itemValue="#{_under}" converter="#{stockConverter}"
                            completeMethod="#{tableHifiveInit.completeUnderlying}" style="width:100%">
               <p:ajax event="itemSelect" listener="#{tableHifiveInit.resetUnderlying}"  update="tableHifiveUnderlying"/>
            </p:autoComplete> 
          </f:facet>
        </p:cellEditor>
      </p:column> -->
  
      <!-- <p:column id="colUnderlyingIdCombo" sortBy="#{_underlying.underlyingId}" width="100" >
        <f:facet name="header">  
           <h:outputText value="#{messages.getUnderlyingId}" />  
         </f:facet>
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{_underlying.underlyingId}" /></f:facet>
          <f:facet name="input">
            <p:selectOneMenu value="#{_underlying.underlyingId}" filter="true" filterMatchMode="contains"
              panelStyle="width=150%" style="width:100%">
              <s:selectItems value="#{tableHifiveInit.allUnderlyingIdList}" var="_under"  label="#{_under}">
              
              </s:selectItems>
            </p:selectOneMenu>
           </f:facet> 
        </p:cellEditor>
      </p:column> -->
      
<!--       <p:column id="colUnderlyingIdCombo" sortBy="#{_underlying.underlyingId}" width="100" >
        <f:facet name="header">  
           <h:outputText value="#{messages.getUnderlyingId}" />  
         </f:facet>
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{_underlying.underlyingId}" /></f:facet>
          <f:facet name="input">
            <p:selectOneMenu id="selUnderId" value="#{_underlying.underlyingId}" filter="true" filterMatchMode="contains"
              panelStyle="width=150%" style="width:100%">
              <s:selectItems value="#{tableHifiveInit.allUnderlyingIdList}" var="_under"  label="#{_under}"/>
              <p:ajax listener="#{tableHifiveInit.resetUnderlying(_underlying)}" update="tableHifiveUnderlying" />            
            </p:selectOneMenu>
           </f:facet> 
        </p:cellEditor>
      </p:column> -->
      
      <p:column id="colUnderlyingIdCombo2" sortBy="#{_underlying.underlyingId}" width="100" >
        <f:facet name="header">  
           <h:outputText value="#{messages.getUnderlyingId}" />  
         </f:facet>
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{_underlying.underlyingId}" /></f:facet>
          <f:facet name="input">
            <p:selectOneMenu id="selUnderId2" value="#{_underlying.underlyingId}" filter="true" filterMatchMode="contains"
              panelStyle="width=150%" style="width:100%">
              <s:selectItems value="#{tableHifiveInit.underlyingIdList}" var="_under"  label="#{_under}"/>
              <p:ajax listener="#{tableHifiveInit.resetUnderlying(_underlying)}" update="tableHifiveUnderlying" />            
            </p:selectOneMenu>
           </f:facet> 
        </p:cellEditor>
      </p:column>
      
      
      <!--  <p:column id="colUnderlyingTypezz" sortBy="#{_underlying.underlying.mvId}"  width="100"  >
        <f:facet name="header">  
           <h:outputText value="#{messages.underlyingType1}" />  
         </f:facet>
          <h:outputText value="#{_underlying.underlying.mvId}" />
      </p:column> -->
      <p:column id="colUnderlyingType" sortBy="#{_underlying.underlying.mvType}"  width="100"  >
        <f:facet name="header">  
           <h:outputText value="#{messages.underlyingType}" />  
         </f:facet>
          <h:outputText value="#{_underlying.underlying.mvType}" />
      </p:column>
      
       <p:column id="colBasePrice" sortBy="#{_underlying.basePrice}"  width="100" >
        <f:facet name="header">  
           <h:outputText value="#{messages.getBasePrice}" />  
         </f:facet>
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{_underlying.basePrice}" /></f:facet>
          <f:facet name="input"><p:inputText id="inputBasePrice" required="true" value="#{_underlying.basePrice}" /> </f:facet>
        </p:cellEditor>
      </p:column>
      
       <!-- <p:column id="colCurrentPrice" sortBy="#{_underlying.underIndex.priceMap.get(bssd).closePrice}"  width="100" >
        <f:facet name="header">  
           <h:outputText value="#{messages.currentPrice}" />  
         </f:facet>
        <h:outputText value="#{_underlying.underIndex.priceMap.get(bssd).closePrice}" />  
      </p:column> -->
      
      <p:column id="colCurrentPrice1"   width="100" >
        <f:facet name="header">  
           <h:outputText value="#{messages.currentPrice}" />  
         </f:facet>
        <h:outputText value="#{_underlying.underJoin.getPriceData(bssd).closePrice}" />  
      </p:column>

    <p:column id="colDividend" sortBy="#{_underlying.dividend}" width="100" >
        <f:facet name="header">  
           <h:outputText value="#{messages.getDividend}" />  
         </f:facet>
         <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{_underlying.dividend}" /></f:facet>
          <f:facet name="input"><p:inputText value="#{_underlying.dividend}"/></f:facet>
         </p:cellEditor>
      </p:column>
      
      <p:column id="colIsUpHitted" sortBy="#{_underlying.isUphitted}" width="100" >
        <f:facet name="header">  
           <h:outputText value="#{messages.isUpHitted}" />  
         </f:facet>
                  <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{_underlying.upHitted}" /></f:facet>
          <f:facet name="input"><p:inputText value="#{_underlying.upHitted}"/></f:facet>
         </p:cellEditor>
      </p:column>
    </p:dataTable>
    <!-- </h:panelGroup> -->
  </h:form>
</ui:composition>