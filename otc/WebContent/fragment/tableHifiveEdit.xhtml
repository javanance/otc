<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.org/schema/seam/taglib"
  xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui">

  <h:form id="formHifiveEdit">

    <p:growl id ="growl" showDetail="false" sticky="false"  life="5000" />

    <p:remoteCommand name ="rcResetSelection" action="#{tableHifiveInit.resetSelection}" update="@(.ui-datatable)"/>
    <!-- <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
      <p:commandButton value="#{messages.yes}" type="button" icon="ui-icon-check" styleClass="ui-confirmdialog-yes"/>
      <p:commandButton value="#{messages.no}" type="button" icon="ui-icon-check" styleClass="ui-confirmdialog-no"/>
    </p:confirmDialog> -->
    <!-- <p:remoteCommand name ="rcCellEdit" action="#{tableHifiveInit.onCpartyChange}"/> -->

    <p:panelGrid columns="2" >
      <p:commandButton value="#{messages.save}" action="#{tableHifiveInit.save}" update="growl"/>
      <p:commandButton value="#{messages.simulate}" action="#{tableHifiveInit.simulate}" update="growl, @(.ui-datatable)"/> 
    </p:panelGrid>
    
    <p:contextMenu for="tableHifive" widgetVar="hifiveCmenu">
      <p:menuitem value="#{messages.insertHifive}" action="#{tableHifiveInit.addHifive}" update="growl, @(.ui-datatable)" />
      <p:separator/>
      <p:menuitem value="#{messages.deleteHifive}" action="#{tableHifiveInit.removeHifive}"
                  update="growl, @(.ui-datatable)"  oncomplete="rcResetSelection()"/>
<!--       <p:menuitem >
        <p:commandLink value="#{messages.deleteHifive}" styleClass="ui-menuitem-link" action="#{tableHifiveInit.removeHifive}" 
            update="growl, @(.ui-datatable)"  oncomplete="rcResetSelection()" ajax="true">
          <h:outputText styleClass="ui-menuitem-icon ui-icon ui-icon-close" />
          <h:outputText value="#{messages.close}" styleClass="ui-menuitem-text" />
          <p:confirm header="#{messages.confirm}" message="#{messages.confirmMessage}" icon="ui-icon-alert"/>
        </p:commandLink>
      </p:menuitem>   -->
    </p:contextMenu>
    <!-- <p:autoComplete id="innputCntParty" value="#{tableHifiveInit.xxcounterparty}"
            completeMethod="#{tableHifiveInit.completeCpartyObj}"  var="cparty"  itemLabel="#{cparty.counterpartyId}"
            itemValue="#{cparty}" converter="#{counterpartyConverter}" forceSelection="true">
              <p:ajax event="itemSelect" listener="#{tableHifiveInit.resetCparty}" update="tableHifive"/>
              <p:column > #{cparty.creditRatingCd} / #{cparty.counterpartyName}  </p:column>
    </p:autoComplete> -->
              
    <p:dataTable id="tableHifive" var="_hifive" value="#{tableHifiveInit.hifiveList}" 
      widgetVar="wgTableHifivezz"
      emptyMessage="#{messages.noDataFound}"
      filteredValue="#{tableHifiveInit.filterHifiveList}"  filterEvent="keyup"
      selection="#{tableHifiveInit.selectHifive}" selectionMode="single"
      rowKey="#{_hifive.prodId}" 
      rowIndexVar="rowIndex" 
      editable="#{isEditable}" editMode="#{editMode}" 
      editingRow="false"  
      sortMode="multiple"
      resizableColumns="true" liveResize="false"
      paginator="true" paginatorPosition="bottom" rows="10"
      paginatorTemplate="{FirstPageLink} {PreviousPageLink} {JumpToPageDropdown} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
      rowsPerPageTemplate="10,25,50">

      <p:ajax event="rowSelect" listener="#{hifiveSimulator.onHifiveSelect}" update="@(.ui-datatable)" />
      <!-- <p:ajax  event="filter" listener="#{tableHifiveInit.resetSelection}"  update="tableHifive"/> -->
      <p:ajax event="filter" oncomplete="rcResetSelection()"  />
      
      <!-- <p:ajax event="sort" oncomplete="rcSelectDefault()"/> -->
      <!-- <p:ajax event ="cellEdit" listener="#{tableHifiveInit.onCpartyChange}" 
            onstart="wgTableHifive.selectRow(#{rowIndex})" update="@parent:growl, @(.ui-datatable)"/> -->
      <!-- <p:ajax event ="cellEdit" oncomplete="rcCellEdit()" /> -->
      <!-- <p:ajax event="rowSelect" listener="#{tableHifiveStrikeInit.loadPivotTable1}" update="@(.ui-datatable)" /> -->
<!--       <p:column selectionMode="single" headerText="All" exportable="false" width="6"  /> -->

      <p:column id="colIsVirtual" sortBy="#{_hifive.virtual}" 
                filterBy="#{_hifive.virtual}" filterMatchMode="contains"  width="30">
        <f:facet name="header"><h:outputText value="#{messages.isVirtual}" /></f:facet>
        <h:outputText value="#{_hifive.virtual}"/>
      </p:column>

      <p:column id="colProdId" sortBy="#{_hifive.prodId}" 
                filterBy="#{_hifive.prodId}" filterMatchMode="contains"  width="100">
        <f:facet name="header"><h:outputText value="#{messages.getProdId}" /> </f:facet>
        <h:outputText value="#{_hifive.prodId}" />
      </p:column>

      <p:column id="colProdName" sortBy="#{_hifive.prodName}" 
                filterBy="#{_hifive.prodName}" filterMatchMode="contains"  width="100">
        <f:facet name="header"><h:outputText value="#{messages.getProdName}" /> </f:facet>
        <p:cellEditor rendered="#{_hifive.virtual}">
          <f:facet name="output"> <h:outputText value="#{_hifive.prodName}"/></f:facet>        
          <f:facet name="input"> <p:inputText id="inputProdName" value="#{_hifive.prodName}" /></f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.prodName}"  rendered="#{! _hifive.virtual}"/>
      </p:column>

     <p:column id="colHifiveType" sortBy="#{_hifive.hifiveType}" 
                filterBy="#{_hifive.hifiveType}" filterMatchMode="contains" width="100">
        <f:facet name="header"><h:outputText value="#{messages.getHifiveType}" /> </f:facet>
        <p:cellEditor  rendered="#{_hifive.virtual}">
        <f:facet name="output"> <h:outputText value="#{_hifive.hifiveType}" /></f:facet>
        <f:facet name="input"> <p:inputText id="inputHifiveType" value="#{_hifive.hifiveType}" /></f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.hifiveType}"  rendered="#{! _hifive.virtual}"/>
      </p:column>
      
      <p:column id="colIssueDate" sortBy="#{_hifive.issueDate}" filterBy="#{_hifive.issueDate}"
        filterMatchMode="contains" width="100">
        <f:facet name="header"><h:outputText value="#{messages.getIssueDate}" /> </f:facet>
        <p:cellEditor rendered="#{_hifive.virtual}">
        <f:facet name="output"><h:outputText value="#{_hifive.issueDate}" />  </f:facet>
        <f:facet name="input"> <p:inputText id="inputIssueDate" value="#{_hifive.issueDate}" />  </f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.issueDate}"  rendered="#{! _hifive.virtual}"/>
      </p:column>

      <p:column id="colMaturityDate" sortBy="#{_hifive.maturityDate}" filterBy="#{_hifive.maturityDate}"
        filterMatchMode="contains" width="100">
        <f:facet name="header"><h:outputText value="#{messages.getMaturityDate}" /> </f:facet>
        <p:cellEditor rendered="#{_hifive.virtual}">  
        <f:facet name="output"><h:outputText value="#{_hifive.maturityDate}" /> </f:facet>
        <f:facet name="input"><p:inputText id="inputMaturityDate" value="#{_hifive.maturityDate}" /></f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.maturityDate}"  rendered="#{! _hifive.virtual}"/>
      </p:column>
      

  
<!--       <p:column id="colCntPartyObj" sortBy="#{_hifive.counterparty.counterpartyId}"
        filterBy="#{_hifive.counterparty.counterpartyId}" filterMatchMode="contains" width="100">
        <f:facet name="header">
          <h:outputText value="#{messages.countPartyId}" />
        </f:facet>
       <p:cellEditor >
        <f:facet name="output">
          <h:outputText value="#{_hifive.counterparty.counterpartyId}" />
        </f:facet>
        <f:facet name="input">
          <p:autoComplete id="innputCntParty" value="#{_hifive.counterparty}"  immediate="true"
            
            completeMethod="#{counterpartyConverter.completeCpartyObj}"  var="cparty"  itemLabel="#{cparty.counterpartyId}"
            itemValue="#{cparty}" converter="#{counterpartyConverter}"  forceSelection="true">
              <p:ajax event="itemSelect" listener="#{tableHifiveInit.resetCparty}" update="tableHifive"/>
              <p:column > #{cparty.creditRatingCd} / #{cparty.counterpartyName}  </p:column>
          </p:autoComplete>
        </f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.counterparty.counterpartyId}" rendered="#{! _hifive.virtual}"/>
      </p:column>
 -->      

      <p:column id="colCntPartyId" sortBy="#{_hifive.cpartyId}"
        filterBy="#{_hifive.cpartyId}" filterMatchMode="contains" width="100">
        <f:facet name="header"><h:outputText value="#{messages.countPartyId}" /></f:facet>
        <p:cellEditor rendered="#{_hifive.virtual}">
        <f:facet name="output"><h:outputText value="#{_hifive.cpartyId}" /></f:facet>
        <f:facet name="input">
          <p:autoComplete value="#{_hifive.cpartyId}" completeMethod="#{tableHifiveInit.completeCntparty}"  
                          forceSelection="true" emptyMessage="No Match Data">
              <p:ajax event="itemSelect" listener="#{tableHifiveInit.resetCntparty}"  update="tableHifive"/>
          </p:autoComplete>
          <!-- <p:autoComplete id="innputCntPartyId" value="#{_hifive.cpartyId}" completeMethod="#{tableHifiveInit.completeCparty}"  >
              <p:ajax event="itemSelect" onstart="wgTableHifivezz.unselectAllRows(); wgTableHifivezz.selectRow(5,false)" 
                update="tableHifive"/>
          </p:autoComplete> -->
        </f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.cpartyId}"  rendered="#{! _hifive.virtual}"/>        
      </p:column>

      <p:column id="colCntPartyName" sortBy="#{_hifive.counterparty.counterpartyName}"
                filterBy="#{_hifive.counterparty.counterpartyName}" filterMatchMode="contains" width="100">
        <f:facet name="header"><h:outputText value="#{messages.countPartyName}" /></f:facet>
        <h:outputText value="#{_hifive.counterparty.counterpartyName}" />
      </p:column>      
      
      <p:column id="colCreditRatingCd" sortBy="#{_hifive.counterparty.creditRatingCd}" 
                filterBy="#{_hifive.counterparty.creditRatingCd}" filterMatchMode="contains"    width="100">
        <f:facet name="header"><h:outputText value="#{messages.getCreditRatingCd}" /></f:facet>
        <h:outputText value="#{_hifive.counterparty.creditRatingCd}" />
      </p:column>
       
      <p:column id="colFaceAmt" sortBy="#{_hifive.faceAmt}" 
                filterBy="#{_hifive.faceAmt}" filterMatchMode="contains" width="100">
       <f:facet name="header"><h:outputText value="#{messages.getFaceAmt}" /></f:facet>
       <p:cellEditor rendered="#{_hifive.virtual}">
        <f:facet name="output"><h:outputText value="#{_hifive.faceAmt}" /></f:facet>
        <f:facet name="input"><p:inputText id="inputFaceAmt" value="#{_hifive.faceAmt}" /></f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.faceAmt}"  rendered="#{! _hifive.virtual}"/>
      </p:column>

      <p:column id="colNotionalAmt" sortBy="#{_hifive.notionalAmt}" filterBy="#{_hifive.notionalAmt}"
                filterMatchMode="contains" width="100">
        <f:facet name="header"><h:outputText value="#{messages.getNotionalAmt}" /></f:facet>
        <p:cellEditor rendered="#{_hifive.virtual}">
        <f:facet name="output"><h:outputText value="#{_hifive.notionalAmt}" /></f:facet>
        <f:facet name="input"><p:inputText id="inputNotionalAmt" value="#{_hifive.notionalAmt}" /></f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.notionalAmt}"  rendered="#{! _hifive.virtual}"/>
      </p:column>

      <p:column id="colDownBarrier" sortBy="#{_hifive.downBarrier}" filterBy="#{_hifive.downBarrier}"
                filterMatchMode="contains" width="100">
        <f:facet name="header"><h:outputText value="#{messages.getDownBarrier}" /></f:facet>
        <p:cellEditor rendered="#{_hifive.virtual}">
        <f:facet name="output"><h:outputText value="#{_hifive.downBarrier}" /></f:facet>
        <f:facet name="input"><p:inputText id="inputDownBarrier" value="#{_hifive.downBarrier}" /></f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.downBarrier}"  rendered="#{! _hifive.virtual}"/>
      </p:column>

      <p:column id="colMaxLoss" sortBy="#{_hifive.maxLoss}" filterBy="#{_hifive.maxLoss}" 
                filterMatchMode="contains"  width="100">
        <f:facet name="header"><h:outputText value="#{messages.getMaxLoss}" /></f:facet>
        <p:cellEditor rendered="#{_hifive.virtual}">
          <f:facet name="output"><h:outputText value="#{_hifive.maxLoss}" /></f:facet>
          <f:facet name="input"><p:inputText id="inputMaxLoss" value="#{_hifive.maxLoss}" /></f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.virtual}"  rendered="#{! _hifive.virtual}"/>
      </p:column>

      <p:column id="colCouponRateLast" sortBy="#{_hifive.couponRateLast}" 
                filterBy="#{_hifive.couponRateLast}"  filterMatchMode="contains" width="100">
        <f:facet name="header"><h:outputText value="#{messages.getCouponRateLast}" /></f:facet>
        <p:cellEditor rendered="#{_hifive.virtual}">
        <f:facet name="output"><h:outputText value="#{_hifive.couponRateLast}" /></f:facet>
        <f:facet name="input"><p:inputText id="inputCouponRateLast" value="#{_hifive.couponRateLast}" /></f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.couponRateLast}"  rendered="#{! _hifive.virtual}"/>
      </p:column>

      <p:column id="colHittingType" sortBy="#{_hifive.hittingType}" filterBy="#{_hifive.hittingType}"
                filterMatchMode="contains" width="100">
        <f:facet name="header"><h:outputText value="#{messages.getHittingType}" /></f:facet>
        <p:cellEditor rendered="#{_hifive.virtual}">
          <f:facet name="output"><h:outputText value="#{_hifive.hittingType}" /></f:facet>
          <f:facet name="input"><p:inputText id="inputHittingType" value="#{_hifive.hittingType}" /></f:facet>
        </p:cellEditor>
        <h:outputText value="#{_hifive.hittingType}"  rendered="#{! _hifive.virtual}"/>
      </p:column>
    </p:dataTable>
  </h:form>
</ui:composition>